<div class="socialwork-container">
  <h2 class="title">
    <span *ngIf="user?.role === 'admin'"
      >Coberturas médicas que trabaja la empresa</span
    >
    <span *ngIf="user?.role === 'attendant'"
      >Coberturas médicas que cubre el médico</span
    >
  </h2>

  <!-- Listado de obras sociales -->
  <ul class="socialwork-list" *ngIf="returnSocialworks()?.length; else noData">
    <li *ngFor="let sw of returnSocialworks()" class="socialwork-item">
      <div class="info">
        <span class="name">{{ sw.name }}</span>
        <span
          class="status"
          [class.active]="sw.active"
          [class.inactive]="!sw.active"
        >
          {{ sw.active ? "Activa" : "Inactiva" }}
        </span>
      </div>

      <div class="actions">
        <button
          class="toggle"
          *ngIf="user?.role === 'admin'"
          (click)="toggleStatus(sw)"
        >
          {{ sw.active ? "Inactivar" : "Activar" }}
        </button>

        <!--DELETE IS ONLY FOR ATTENDANT-->
        <button
          class="delete"
          *ngIf="user?.role === 'attendant'"
          (click)="deleteAttendantXSocialwork(sw.id)"
        >
          Eliminar
        </button>
      </div>
    </li>
  </ul>

  <ng-template #noData>
    <p class="no-data">No hay obras sociales cargadas.</p>
  </ng-template>

  <div class="add-socialwork-form" *ngIf="user?.role === 'admin'">
    <input
      type="text"
      placeholder="Nueva obra social"
      [(ngModel)]="newSocialworkName"
    />
    <button (click)="addSocialwork()">Agregar</button>
  </div>

  <div class="add-socialwork-form" *ngIf="user?.role === 'attendant'">
    <select [(ngModel)]="selectedSocialwork">
      <option [ngValue]="null" disabled>Seleccionar obra social</option>
      <option *ngFor="let sw of socialworks" [value]="sw.id">
        {{ sw.name }}
      </option>
    </select>
    <button (click)="addAttendantXSocialwork()">Agregar</button>
  </div>
</div>
